from rlce.galois_field import GF_init_logexp_table, GFexpTable, GFlogTable, GF_init_mult_table, GFmultTable
from rlce.galois_field import fieldSize
from rlce.galois_field import matrix_echelon
from rlce.galois_field import GF_addvec, GF_mulvec, GF_vecdiv
import numpy as np
# GF_init_logexp_table(10)
# for i in range(fieldSize[10]):
#     print(GFlogTable[10][i], end=' ')
# print('\n')
# print(fieldSize[10])
# GF_init_mult_table(10)
# for i in range(1):
#     for j in range(fieldSize[10]):
#         print(GFmultTable[10][i][j], end=' ')
#     print('\n\n')

def loadArrayFromFile(filename):
    try:
        array = np.loadtxt(filename)
        return array
    except IOError:
        print("Błąd odczytu pliku.")
        return None

# b = [1, 802, 0, 0, 226, 269, 467, 0, 109, 887, 0, 0, 216, 408, 0, 0, 923, 77, 0, 499, 467, 0, 805, 286, 486, 777, 0, 577, 239, 0, 514, 849, 0, 0, 756, 138, 660, 0, 412, 0, 235, 429, 732, 345, 0, 251, 286, 316, 0, 240, 868, 0, 0, 0, 210, 0, 0, 199, 939, 493, 0, 552, 384, 803, 729, 0, 906, 186, 0, 0, 271, 0, 539, 0, 720, 0, 842, 923, 0, 0, 983, 0, 0, 1022, 438, 596, 60, 341, 786, 0, 0, 944, 0, 831, 491, 272, 141, 920, 0, 0, 0, 962, 62, 454, 422, 0, 600, 201, 0, 838, 137, 0, 346, 0, 0, 0, 562, 855, 724, 0, 94, 0, 411, 335, 179, 510, 666, 0, 79, 329, 0, 811, 817, 0, 0, 104, 311, 0, 624, 273, 449, 0, 0, 0, 841, 293, 410, 0, 0, 0, 532, 85, 425, 0, 454, 158, 0, 905, 0, 0, 0, 0, 0, 0, 983, 0, 0, 362, 1012, 558, 0, 0, 0, 576, 0, 0, 0, 0, 847, 804, 0, 0, 0, 941, 475, 941, 0, 800, 0, 0, 370, 0, 339, 321, 838, 836, 130, 593, 114, 638, 779, 0, 0, 560, 0, 0, 70, 385, 947, 0, 21, 0, 363, 34, 888, 377, 605, 838, 870, 0, 945, 175, 126, 0, 571, 0, 0, 0, 1008, 721, 0, 0, 0, 287, 0, 394, 147, 0, 0, 544, 801, 0, 834, 780, 476, 587, 658, 717, 0, 0, 683, 407, 0, 756, 404, 493, 656, 435, 939, 331, 524, 477, 37, 696, 106, 0, 0, 0, 0, 981, 105, 0, 0, 228, 911, 0, 0, 356, 619, 761, 532, 961, 0, 0, 971, 0, 157, 0, 315, 0, 0, 618, 0, 150, 0, 840, 623, 98, 735, 733, 0, 0, 760, 7, 137, 0, 292, 841, 845, 157, 142, 0, 720, 0, 933, 0, 234, 905, 863, 0, 0, 130, 0, 401, 0, 212, 851, 0, 502, 0, 0, 765, 2, 205, 0, 0, 0, 0, 414, 151, 0, 981, 86, 927, 342, 0, 439, 0, 725, 683, 0, 946, 0, 368, 1021, 0, 797, 104, 164, 0, 986, 0, 444, 904, 676, 0, 0, 0, 0, 490, 0, 781, 0, 641, 0, 779, 912, 0, 0, 0, 594, 875, 939, 0, 484, 0, 519, 0, 377, 165, 430, 979, 785, 452, 592, 866, 440, 647, 0, 306, 965, 248, 109, 1000, 0, 600, 0, 354, 549, 0, 930, 0, 0, 76, 0, 753, 473, 44, 138, 0, 0, 0, 460, 308, 810, 0, 0, 0, 0, 182, 538, 0, 922, 0, 953, 156, 60, 0, 219, 155, 932, 0, 935, 623, 837, 208, 0, 0, 78, 943, 519, 0, 0, 0, 0, 423, 855, 484, 0, 451, 55, 0, 154, 98, 0, 901, 301, 839, 609, 143, 580, 765, 110, 0, 804, 0, 0, 0, 0, 0, 0, 327, 0, 0, 0, 0, 0, 0, 0, 0, 822, 0, 146, 0, 66, 254, 0, 0, 0, 917, 648, 233, 986, 667, 226, 0, 832, 0, 691, 1015, 0, 823, 529, 0, 199, 0, 127, 710, 87, 351, 0, 0, 0, 624, 0, 0, 0, 457, 0, 0, 0, 0, 0, 0, 0, 653, 0, 636, 0, 514, 0, 934, 0, 0, 575, 834, 0, 0, 794, 371, 466, 204, 0, 0, 803, 422, 12, 819, 652, 0, 0, 0, 293, 782, 960, 22, 78, 0, 187, 0, 0, 352, 0, 932, 258, 289, 956, 727, 0, 0, 545, 119, 0, 549, 230, 0, 1006, 636, 136, 0, 26, 0, 602, 672, 468, 0, 534, 0, 195, 0, 932, 0, 0, 982, 0, 331, 0, 609, 0, 0, 152, 689, 208, 0, 0, 0, 0, 0, 741, 0, 1022, 0, 299, 727, 685, 714, 0, 0, 169, 0, 473, 492, 231, 308, 0, 0, 0, 100, 0, 753, 0, 0, 912, 0, 718, 292, 0, 188, 0, 0, 0, 838, 169, 53, 59, 519, 31, 0, 0, 383, 306, 0, 155, 433, 143, 666, 668, 301, 0, 0, 0, 0, 812, 0, 365, 0, 171, 989, 645, 0, 608, 83, 718, 947, 927, 881, 523, 797, 0, 0, 0, 0, 467, 0, 0, 0, 0, 938, 0, 504, 0, 940, 0, 0, 0, 0, 447, 0, 510, 594, 0, 0, 0, 655, 0, 0, 0, 279, 994, 0, 0, 192, 897, 656, 817, 272, 808, 640, 211, 929, 550, 391, 0, 452, 0, 0, 16, 0, 936, 0, 516, 559, 183, 0, 0, 0, 0, 281, 951, 395, 881, 0, 0, 321, 298, 0, 0, 1017, 0, 29, 0, 0, 0, 350, 0, 800, 746, 0, 737, 850, 441, 395, 0, 666, 858, 0, 0, 0, 0, 0, 603, 0, 0]
# c = 767
# print(GF_mulvec(c, b, None, len(b), 10))
# print(len(b))
# raise Exception('opafs')

# print(matrix_echelon(G, 10))
a = loadArrayFromFile('/home/sirtus/Univ/crypto/rlce/RLCE/RLCEv1/arr.log')
a = a.astype(int)
for  i in range(4):
    for j in a[i]:
        print(j, end=' ')
    print('\n')
print('////////////////////////')
for  i in range(4, 0, -1):
    for j in a[-i]:
        print(j, end=' ')
    print('\n')
# a = np.array(a)
# print(a)
# b = [121, 206, 0, 0, 0, 0, 0, 615, 0, 0, 0, 85, 822, 0, 984, 248, 913, 0, 505, 0, 0, 632, 0, 808, 737, 0, 0, 0, 0, 517, 0, 876, 190, 837, 198, 0, 865, 0, 0, 0, 871, 0, 0, 0, 144, 675, 779, 0, 703, 0, 0, 0, 0, 0, 0, 0, 289, 41, 9, 840, 950, 0, 0, 264, 31, 0, 0, 587, 207, 611, 446, 331, 275, 215, 0, 800, 694, 931, 945, 132, 834, 0, 95, 0, 801, 0, 992, 0, 0, 662, 651, 0, 0, 0, 828, 501, 0, 0, 0, 148, 792, 0, 0, 0, 381, 643, 0, 0, 0, 0, 177, 945, 516, 0, 0, 1008, 610, 0, 0, 0, 0, 0, 823, 123, 297, 0, 0, 0, 0, 95, 0, 326, 0, 0, 512, 0, 0, 203, 170, 890, 259, 446, 329, 268, 906, 571, 0, 429, 390, 778, 640, 774, 194, 0, 0, 0, 287, 0, 0, 0, 764, 0, 686, 0, 0, 57, 130, 0, 0, 0, 784, 0, 125, 0, 387, 0, 0, 680, 973, 15, 0, 0, 147, 0, 261, 0, 596, 613, 0, 0, 0, 190, 0, 137, 0, 0, 0, 0, 0, 0, 353, 663, 0, 993, 911, 459, 0, 0, 0, 873, 661, 0, 494, 924, 0, 0, 0, 330, 936, 874, 0, 0, 618, 667, 0, 0, 0, 0, 0, 330, 0, 0, 0, 0, 0, 0, 405, 494, 960, 1012, 323, 183, 0, 0, 0, 498, 0, 0, 352, 0, 524, 646, 0, 870, 0, 247, 832, 353, 825, 270, 125, 287, 731, 0, 654, 984, 0, 438, 877, 382, 439, 561, 36, 0, 0, 688, 696, 949, 712, 0, 289, 738, 0, 976, 0, 294, 72, 0, 562, 316, 0, 881, 411, 260, 0, 0, 0, 357, 430, 538, 406, 0, 0, 0, 0, 991, 0, 658, 858, 939, 0, 510, 0, 323, 753, 0, 224, 0, 0, 983, 737, 0, 0, 161, 930, 167, 0, 0, 905, 656, 0, 0, 58, 0, 0, 501, 0, 0, 728, 0, 161, 0, 294, 400, 115, 0, 594, 161, 0, 1005, 0, 0, 0, 613, 678, 856, 1004, 308, 0, 0, 53, 0, 225, 550, 0, 0, 299, 0, 52, 217, 384, 0, 0, 377, 132, 482, 380, 320, 423, 967, 184, 664, 0, 957, 290, 0, 315, 0, 0, 1009, 843, 450, 0, 0, 0, 1021, 73, 0, 0, 506, 462, 0, 0, 0, 185, 0, 0, 0, 0, 0, 0, 139, 335, 325, 0, 0, 0, 0, 0, 431, 351, 76, 19, 602, 238, 424, 927, 303, 484, 251, 496, 411, 0, 510, 373, 0, 412, 0, 0, 0, 0, 0, 0, 0, 205, 0, 0, 0, 186, 0, 116, 116, 599, 0, 810, 253, 730, 801, 0, 156, 825, 779, 162, 0, 723, 342, 670, 0, 408, 757, 803, 604, 475, 940, 1006, 0, 0, 0, 373, 593, 0, 697, 0, 0, 0, 0, 482, 0, 0, 65, 410, 553, 256, 0, 0, 721, 152, 0, 0, 30, 496, 413, 0, 322, 55, 561, 212, 0, 455, 134, 622, 869, 219, 0, 406, 788, 0, 850, 712, 931, 0, 526, 0, 751, 1008, 0, 936, 0, 0, 0, 173, 386, 0, 914, 941, 643, 0, 373, 874, 153, 37, 0, 780, 0, 58, 0, 277, 293, 517, 0, 0, 451, 37, 332, 9, 79, 560, 628, 0, 0, 505, 765, 371, 0, 0, 478, 836, 6, 841, 979, 0, 65, 909, 624, 0, 300, 322, 0, 0, 166, 128, 141, 0, 404, 0, 12, 545, 429, 34, 0, 0, 0, 527, 977, 171, 988, 824, 631, 332, 679, 0, 285, 0, 457, 500, 378, 0, 487, 527, 81, 559, 325, 478, 700, 0, 794, 0, 0, 0, 148, 969, 0, 0, 596, 0, 984, 836, 993, 153, 779, 691, 0, 0, 0, 0, 678, 976, 0, 0, 773, 408, 805, 0, 490, 644, 0, 0, 0, 234, 454, 399, 0, 947, 0, 0, 508, 845, 0, 884, 469, 0, 0, 0, 603, 508, 895, 397, 0, 962, 662, 0, 69, 832, 191, 586, 0, 0, 986, 633, 578, 0, 391, 0, 693, 0, 0, 328, 0, 0, 776, 1000, 927, 0, 0, 724, 1016, 211, 0, 0, 0, 449, 0, 0, 916, 137, 0, 667, 0, 0, 561, 0, 0, 733, 0, 0, 546, 123, 0, 993, 0, 0, 38, 791, 936, 0, 223, 0, 996, 398, 0, 444, 0, 378, 83, 559, 0, 0, 0, 0, 840, 845, 285, 0, 928, 0, 477, 738, 0, 982, 0, 0, 713, 0, 551, 223, 0, 843, 0, 311, 9, 576, 0, 481, 0, 488, 0, 0, 0, 365, 0, 461, 0, 0, 1022, 804, 0, 0, 436, 305, 0, 0, 927, 1012, 299, 41, 0, 0, 0, 943, 0 ]

print(matrix_echelon(a, 10))
# print(np.linalg.solve(a))
print(a.shape)